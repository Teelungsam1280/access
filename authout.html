<!doctype html>
<html lang="en">

<head>

<!-- Begin Inspectlet Asynchronous Code -->
<script type="text/javascript">
(function() {
window.__insp = window.__insp || [];
__insp.push(['wid', 1709244756]);
var ldinsp = function(){
if(typeof window.__inspld != "undefined") return; window.__inspld = 1; var insp = document.createElement('script'); insp.type = 'text/javascript'; insp.async = true; insp.id = "inspsync"; insp.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://cdn.inspectlet.com/inspectlet.js?wid=1709244756&r=' + Math.floor(new Date().getTime()/3600000); var x = document.getElementsByTagName('script')[0]; x.parentNode.insertBefore(insp, x); };
setTimeout(ldinsp, 0);
})();
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-4867797789380537",
    enable_page_level_ads: true
  });
</script>
<!-- End Inspectlet Asynchronous Code -->

  <meta charset="utf-8">
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"
    integrity="sha256-/ijcOLwFf26xEYAjW75FizKVo5tnTYiQddPZoLUHHZ8="
    crossorigin="anonymous"></script>
  <meta name="author" content="">
  <link rel="icon" href="images/logo.png">
  <link rel="manifest" href="manifest.json">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
    integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
    integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
    crossorigin="anonymous"></script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-123568344-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-123568344-1');
  </script>


  <script>
    //GOOGLE TAG MANAGER + OPTIMIZE + A LITE CAPTHCA SYSTEM + GA + GAINSIGHTS
    !function () {var analytics = window.analytics = window.analytics || []; if (!analytics.initialize) if (analytics.invoked) window.console && console.error && console.error("Segment snippet included twice."); else {analytics.invoked = !0; analytics.methods = ["trackSubmit", "trackClick", "trackLink", "trackForm", "pageview", "identify", "reset", "group", "track", "ready", "alias", "debug", "page", "once", "off", "on"]; analytics.factory = function (t) { return function () { var e = Array.prototype.slice.call(arguments); e.unshift(t); analytics.push(e); return analytics } }; for (var t = 0; t < analytics.methods.length; t++) { var e = analytics.methods[t]; analytics[e] = analytics.factory(e) } analytics.load = function (t, e) { var n = document.createElement("script"); n.type = "text/javascript"; n.async = !0; n.src = "https://cdn.segment.com/analytics.js/v1/" + t + "/analytics.min.js"; var a = document.getElementsByTagName("script")[0]; a.parentNode.insertBefore(n, a); analytics._loadOptions = e }; analytics.SNIPPET_VERSION = "4.1.0";analytics.load("gqbaHuIC0OV4lpzJiKF4pOdrJRIop365");analytics.page();(function (w, d, s, l, i) {w[ l ] = w[ l ] || []; w[ l ].push({'gtm.start':new Date().getTime(), event: 'gtm.js'}); var f = d.getElementsByTagName(s)[ 0 ],j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src ='https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);})(window, document, 'script', 'dataLayer', 'GTM-NPBCWPN');}}(); analytics.page(document.title);
  </script>

  <!-- FIREBASE SDK -->
  <script defer src="/__/firebase/5.3.1/firebase-app.js"></script>
  <!-- include only the Firebase features as you need -->
  <script defer src="/__/firebase/5.3.1/firebase.js"></script>
  <script defer src="/__/firebase/5.3.1/firebase-database.js"></script>
  <script defer src="/__/firebase/5.3.1/firebase-messaging.js"></script>
  <script defer src="/__/firebase/5.3.1/firebase-storage.js"></script>
  <!-- initialize the SDK after all desired features are loaded -->
  <script defer src="/__/firebase/init.js"></script>


  <script src="https://www.gstatic.com/firebasejs/5.3.1/firebase.js"></script>
  <script async="" defer="" src="//survey.g.doubleclick.net/async_survey?site=4kgjzjutdzpmf3sz3zkzfpe4x4"></script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->

  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#config-web-app -->

  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyBHB7H6L2TgZeDJKS4ENC_fkdWtS_99T_E",
      authDomain: "trapteam-cc.firebaseapp.com",
      databaseURL: "https://trapteam-cc.firebaseio.com",
      projectId: "trapteam-cc",
      storageBucket: "trapteam-cc.appspot.com",
      messagingSenderId: "150993996289",
      appId: "1:150993996289:web:1d4a60e0bd3fc7e0"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    function xout() {
      firebase.auth().signOut().then(function () {
            console.log('Signed Out');
          }, function (error) {
            console.error('Sign Out Error', error);
          });
          document.location.href='/authme.html';
    };
    xout();
    /*firebase.auth().onAuthStateChanged(
        (user) => {
          if (user) {
            // User is signed in.
            displayName = user.displayName
            email = user.email
            emailVerified = user.emailVerified
            photoURL = user.photoURL
            document.getElementById("uname").innerHTML = displayName;
            uid = user.uid
            phoneNumber = user.phoneNumber
            providerData = user.providerData


            try {
              if (firebase.auth().currentUser.emailVerified) {
                console.log("account is fine")
              } else {
                console.log(
                  "You Email is Not Verified. Click OK to send an email to you so you can get verified."
                )

                user
                  .sendEmailVerification()
                  .then(() => {
                    // Email sent.
                  })
                  .catch((error) => {
                    // An error occured.
                  })
              }
            } catch (error) {
              console.log("Could not verify current user");
            }

          }
        })
  });*/
  </script>

  <script src="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.1.1/firebaseui.css" />

  <title>Log In - Access - Trap Team CC</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">


  <!-- Bootstrap core CSS -->
  <link href="../../dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom styles for this template -->
  <link href="cover.css" rel="stylesheet">

</head>

<body class="text-center">
  <!-- FIREBASE STUFF -->
  <p id="load" style="display: none;">Firebase SDK Loading&hellip;</p>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥
      // // The Firebase SDK is initialized and available here!
      //
      // firebase.auth().onAuthStateChanged(user => { });
      // firebase.database().ref('/path/to/ref').on('value', snapshot => { });
      // firebase.messaging().requestPermission().then(() => { });
      // firebase.storage().ref('/path/to/ref').getDownloadURL().then(() => { });
      //
      // // ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥ðŸ”¥

      try {
        let app = firebase.app();
        let features = ['auth', 'database', 'messaging', 'storage'].filter(feature => typeof app[feature] === 'function');
        document.getElementById('load').innerHTML = `Firebase SDK loaded with ${features.join(', ')}`;
      } catch (e) {
        console.error(e);
        document.getElementById('load').innerHTML = 'Error loading the Firebase SDK, check the console.';
      }
    });
  </script>

  <div class="cover-container d-flex w-100 h-100 p-3 mx-auto flex-column">
    <header class="masthead mb-auto">
      <div class="inner">
        <!-- //\cccess stuff/loader -->
        <h3 class="masthead-brand">Auth Manager</h3>
        <button onclick="xout();"  type="button" class="btn btn-dark btn-lg">Sign Out</button>

      </div>
    </header>
<!-- AUTH CONTAINER -->
    <main role="main" class="inner cover">
      <h2 id="uname"></h2>
      <h1 class="cover-heading">Add Extra Auth Providers</h1>

      <div id="firebaseui-auth-container"></div>
      <div id="loader">Loading...</div>

      <p class="lead">
      </p>
    </main>

    <footer class="mastfoot mt-auto">
      <div class="inner">
        <p> <a href="/app" class="effex">Back to Main App</a>!</p>
      </div>

      <script type="text/javascript">

      //AUTHSCRIPT
        // Initialize the FirebaseUI Widget using Firebase.
        var ui = new firebaseui.auth.AuthUI(firebase.auth());
        // The start method will wait until the DOM is loaded.

        var uiConfig = {
          callbacks: {
            signInSuccessWithAuthResult: function (authResult, redirectUrl) {
              // User successfully signed in.
              // Return type determines whether we continue the redirect automatically
              // or whether we leave that to developer to handle.
              return true;
            },
            uiShown: function () {
              // The widget is rendered.
              // Hide the loader.
              document.getElementById('loader').style.display = 'none';
            }
          },
          // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
          signInFlow: 'popup',
            credentialHelper: firebaseui.auth.CredentialHelper.GOOGLE_YOLO,
          signInSuccessUrl: '/addauth.html',
          signInOptions: [
            // Leave the lines as is for the providers you want to offer your users.
            firebase.auth.GoogleAuthProvider.PROVIDER_ID,
            //firebase.auth.FacebookAuthProvider.PROVIDER_ID,
            //firebase.auth.TwitterAuthProvider.PROVIDER_ID,


            firebase.auth.GithubAuthProvider.PROVIDER_ID,
            firebase.auth.EmailAuthProvider.PROVIDER_ID,
            firebase.auth.PhoneAuthProvider.PROVIDER_ID
          ],
          // Terms of service url.
          tosUrl: 'licence.html',
          // Privacy policy url.
          privacyPolicyUrl: 'licence.html'
        };
                //var nui = new firebaseui.auth.AuthUI(firebase.auth());

        ui.start('#firebaseui-auth-container', uiConfig);
        //MS ACCOUNT LINKING - AUTHS USER WITH MICROSOFT.

function lasboto() {
  var provider = new firebase.auth.OAuthProvider('microsoft.com');
  firebase.auth().signInWithPopup(provider)
    .then(function (result) {
      console.log("You Added Microsoft!");
    })
    .catch(function (error) {
      // Handle error.
      if (error.code == "auth/account-exists-with-different-credential") {
        console.log("You already have an account here with us. Please sign in with another service (like Email/Password or Google) to connect this account. ");
      } else {
        console.log(error);
        alert("An Error Occured");
        document.location.reload();
      }

    });
}
document.getElementById("msauth").addEventListener("click", lasboto);


      </script>
    </footer>
  </div>


  <!-- Bootstrap core JavaScript
    ================================================== -->
  <!-- Placed at the end of the document so the pages load faster -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery-slim.min.js"><\/script>')</script>
  <script src="../../assets/js/vendor/popper.min.js"></script>
  <script src="../../dist/js/bootstrap.min.js"></script>
  <script>
    // PWA

    // Add this below content to your HTML page, or add the js file to your page at the very top to register service worker

    // Check compatibility for the browser we're running this in
    if ("serviceWorker" in navigator) {
      if (navigator.serviceWorker.controller) {
        console.log("[PWA Builder] active service worker found, no need to register");
      } else {
        // Register the service worker
        navigator.serviceWorker
          .register("pwabuilder-sw.js", {
            scope: "./"
          })
          .then(function (reg) {
            console.log("[PWA Builder] Service worker has been registered for scope: " + reg.scope);
          });
      }
    }


    let deferredPrompt = null;

    window.addEventListener('beforeinstallprompt', (e) => {
      // Prevent Chrome 67 and earlier from automatically showing the prompt
      e.preventDefault();
      // Stash the event so it can be triggered later.
      deferredPrompt = e;
    });

    async function install() {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        console.log(deferredPrompt)
        deferredPrompt.userChoice.then(function (choiceResult) {

          if (choiceResult.outcome === 'accepted') {
            console.log('Your PWA has been installed');
          } else {
            console.log('User chose to not install your PWA');
          }

          deferredPrompt = null;

        });


      }
    }

    install();

  </script>
  <script src="//cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js"></script>
</body>

</html>
